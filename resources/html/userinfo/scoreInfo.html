<head>
    <link rel="stylesheet" href="{{_res_path}}html/userinfo/userinfo.css">
    <link rel="stylesheet" href="{{_res_path}}html/userinfo/scoreInfo.css">
</head>

<body style="scale: {{size}};">
    {{if background}}
    <div class="background">
        <img src="{{background}}" alt="{{background}}">
    </div>
    {{/if}}
    <div class="left">
        <div class="Player_Info">
            <p>PLAYER_INFO</p>
        </div>
        <div class="Player_Info-after"></div>
        <div class="basic-box">
            <div class="basic-img">
                <img src="{{gameuser.backgroundurl}}" alt="{{gameuser.backgroundurl}}">
            </div>
            <div class="Player_Id">
                <div class="avatar">
                    <img src="{{_res_path}}html/avatar/{{gameuser.avatar}}.png" alt="{{gameuser.avatar}}">
                </div>
                <div class="Player_Id-box">
                    <div class="Player_Id-left">
                        <p>ID</p>
                    </div>
                    <div class="Player_Id-right">
                        <p id="Player_Id">{{gameuser.PlayerId}}</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="left_title">
            <div class="left_title-left">
                <p>PLAYER_DATAIL</p>
            </div>
        </div>
        <div class="Player_data_line">
            <div class="Player_data_line-left">
                <div class="Player_data_title" id="Player_data_left">
                    <p>RKS</p>
                </div>
                <div class="Player_data_value" id="Player_data_left">
                    <p>{{gameuser.rks.toFixed(4)}}</p>
                </div>
            </div>
            <div class="Player_data_line-right">
                <div class="Player_data_title" id="Player_data_right">
                    <p>CLG MOD</p>
                </div>
                <div class="Challenge" id="Challenge{{gameuser.CLGMOD ? '1' : '2'}}">
                    <img src="{{_res_path}}html/otherimg/{{gameuser.ChallengeMode}}.png"
                        alt="{{gameuser.ChallengeMode}}">
                    <span>{{gameuser.ChallengeModeRank}}</span>
                </div>
                {{if gameuser.CLGMOD}}
                <div class="Player_data_value" id="Player_data_right">
                    <p>{{gameuser.CLGMOD}}</p>
                </div>
                {{/if}}
            </div>
        </div>
        <div class="left_title">
            <div class="left_title-left">
                <p>SONG_DATAIL</p>
            </div>
        </div>

        <!-- <div class="Player_data_line">
            <div class="Player_data_line-left EZ">
                <div class="Player_data_title" id="Player_data_left">
                    <p>EZ</p>
                </div>
                <div class="Player_data_value" id="Player_data_left">
                    <p>{{EZ.difficulty || '-'}}</p>
                </div>
            </div>
            <div class="Player_data_line-right HD">
                <div class="Player_data_title" id="Player_data_right">
                    <p>HD</p>
                </div>
                <div class="Player_data_value" id="Player_data_right">
                    <p>{{HD.difficulty || '-'}}</p>
                </div>
            </div>
        </div>
        <div class="Player_data_line">
            <div class="Player_data_line-left IN"
                style="width: 38%;clip-path: polygon(0% 0%, 100% 0%, 89% 100%, 0% 100%, 0% 0%);">
                <div class="Player_data_title" id="Player_data_left">
                    <p>IN</p>
                </div>
                <div class="Player_data_value" id="Player_data_left">
                    <p>{{IN.difficulty || '-'}}</p>
                </div>
            </div>
            <div class="Player_data_line-right AT"
                style="width: 50%;clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%, 9% 0%);">
                <div class="Player_data_title" id="Player_data_right">
                    <p>AT</p>
                </div>
                <div class="Player_data_value" id="Player_data_right">
                    <p>{{AT.difficulty || '-'}}</p>
                </div>
            </div>
        </div> -->
        <div class="createdbox">
            <div class="phi-plugin">
                <p>Phi-Plugin</p>
            </div>
            <div class="ver">
                <p>{{Version.ver}}</p>
            </div>
        </div>
    </div>
    <div class="right">
        <div class="file-content">
            <div class="file-content-left">
                <p>SCORE_DATA</p>
            </div>
        </div>
        <div class="data_title">
            <div class="data_title-left">
                <p>SCORE_HISTORY</p>
            </div>
        </div>
        <div class="svg-box">
            <div class="value_box">
                <p>20GiB</p>
                <p>10MiB</p>
            </div>
            <div class="line-box">
                <div class="line">
                    <svg>
                        <defs>
                            <marker id="dot" viewBox="0 0 10 10" markerWidth="8" markerHeight="8" refX="2" refY="2">
                                <circle cx="2" cy="2" r="1">2333</circle>
                            </marker>
                        </defs>
                        <line x1="0" y1="0%" x2="14.2857%" y2="100%"></line>
                        <line x1="14.2857%" y1="100%" x2="28.5714%" y2="25%"></line>
                        <line x1="28.5714%" y1="25%" x2="42.8571%" y2="80%"></line>
                        <line x1="42.8571%" y1="80%" x2="57.1428%" y2="75%"></line>
                        <line x1="57.1428%" y1="75%" x2="71.4286%" y2="90%"></line>
                        <line x1="71.4286%" y1="90%" x2="85.7143%" y2="20%"></line>
                        <line x1="85.7143%" y1="20%" x2="100%" y2="30%"></line>
                    </svg>
                </div>
                <div class="date_box">
                    <p>2023/8/21 21:30</p>
                    <p>2023/8/21 21:30</p>
                </div>
            </div>
        </div>
        <div class="data_title">
            <div class="data_title-left">
                <p>ACC_HISTORY</p>
            </div>
        </div>
        <div class="svg-box">
            <div class="value_box">
                <p>20GiB</p>
                <p>10MiB</p>
            </div>
            <div class="line-box">
                <div class="line">
                    <svg>
                        <defs>
                            <marker id="dot" viewBox="0 0 10 10" markerWidth="8" markerHeight="8" refX="2" refY="2">
                                <circle cx="2" cy="2" r="1">2333</circle>
                            </marker>
                        </defs>
                        <line x1="0" y1="0%" x2="14.2857%" y2="100%"></line>
                        <line x1="14.2857%" y1="100%" x2="28.5714%" y2="25%"></line>
                        <line x1="28.5714%" y1="25%" x2="42.8571%" y2="80%"></line>
                        <line x1="42.8571%" y1="80%" x2="57.1428%" y2="75%"></line>
                        <line x1="57.1428%" y1="75%" x2="71.4286%" y2="90%"></line>
                        <line x1="71.4286%" y1="90%" x2="85.7143%" y2="20%"></line>
                        <line x1="85.7143%" y1="20%" x2="100%" y2="30%"></line>
                    </svg>
                </div>
                <div class="date_box">
                    <p>2023/8/21 21:30</p>
                    <p>2023/8/21 21:30</p>
                </div>
            </div>
        </div>
        <div class="data_title">
            <div class="data_title-left">
                <p>STATS</p>
            </div>
        </div>
        <div class="stats-box">
            {{each scoreData rank}}
            <div class="one-stats-box {{rank}}" id="A">
                <div class="rank">
                    <p>{{rank}}</p>
                </div>
                {{if rank}}
                <div class="stats-up">
                    <div class="Rating">
                        <img src="../otherimg/{{rank.Rating}}.png" alt="{{Rating}}">
                    </div>
                    {{if rank.Rating != 'NEW'}}
                    <div class="data_score">
                        <p>{{rank.score}}</p>
                    </div>
                    {{/if}}
                </div>
                {{if rank.Rating != 'NEW'}}
                <div class="data_mid">
                    <div class="data_rks">
                        <p>{{rank.rks}}</p>
                    </div>
                    <div class="data_acc">
                        <p>{{rank.acc}}</p>
                    </div>
                </div>
                <div class="data_bottom">
                    <div class="data_suggest">
                        <p>>> {{rank.suggest}}</p>
                    </div>
                </div>
                {{else}}
                <div class="no_info">
                    <p>NO_INFO</p>
                </div>
                {{/if}}
            </div>
        </div>
    </div>
    <!-- 曲目名称自适应name-box的宽度 -->
    <script>
        function adjustFontSize() {

            /**
             * @param {string} id id
             * @param {number} maxFontSize 最大字体大小
             */
            function work(id, maxFontSize = 50) {

                //获取song-name和composer滴元素
                var songName = document.getElementById(id)

                /*调整曲目名称字体大小*/
                var parentElement = songName.parentElement


                //如果字体宽度小于父元素宽度，则增大字体大小
                while (songName.scrollWidth < parentElement.offsetWidth && songName.scrollHeight < parentElement.offsetHeight) {
                    var style = window.getComputedStyle(songName, null).getPropertyValue('font-size')
                    var fontSize = parseFloat(style)

                    //检查是否已经达到最大字体大小
                    if (fontSize >= maxFontSize) {
                        break
                    }

                    songName.style.fontSize = (fontSize + 1) + "px"
                }

                // 如果字体宽度大于父元素宽度，则减小字体大小
                while (songName.scrollWidth > parentElement.offsetWidth || songName.scrollHeight > parentElement.offsetHeight) {
                    var style = window.getComputedStyle(songName, null).getPropertyValue('font-size')
                    var fontSize = parseFloat(style);
                    songName.style.fontSize = (fontSize - 1) + "px";
                }
            }
            work('Player_Id', 60)
            work('song_Id', 60)

        }
        window.onload = adjustFontSize
        window.onresize = adjustFontSize
    </script>
</body>